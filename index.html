<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=5.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex,nofollow">
<title>Sistema de Login Inteligente</title>
<link rel="preconnect" href="https://www.appcreator24.com">
<link rel="dns-prefetch" href="https://www.appcreator24.com">
<link rel="preload" href="https://www.appcreator24.com/login_subcli.php" as="document">
<style>
:root{--primary-color:#2c3e50;--secondary-color:#3498db;--error-color:#e74c3c;--success-color:#2ecc71;--warning-color:#f39c12;--info-color:#1abc9c;--breakpoint-mobile:576px;--breakpoint-tablet:768px;--breakpoint-desktop:992px;}
body{margin:0;padding:0;font-family:'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;background-color:#f5f7fa;color:#333;line-height:1.6;}
.loading-container{display:flex;justify-content:center;align-items:center;height:100vh;background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));flex-direction:column;transition:opacity .5s ease;}
.spinner{width:50px;height:50px;border:5px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;animation:spin 1s ease-in-out infinite;margin-bottom:20px;}
.loading-text{color:#fff;text-align:center;max-width:300px;font-size:1.1rem;margin-bottom:1rem;}
@keyframes spin{to{transform:rotate(360deg);}}
#login-frame{width:100%;height:100vh;border:none;display:none;}
.error-message{display:none;text-align:center;padding:20px;color:#fff;background-color:var(--error-color);position:fixed;top:0;left:0;right:0;z-index:1002;}
@media (max-width:768px){.loading-container{background:var(--primary-color);padding:0 20px;}.spinner{width:40px;height:40px;}.loading-text{font-size:1rem;}}
.floating-toolbox{position:fixed;bottom:20px;right:20px;display:flex;flex-direction:column;align-items:flex-end;gap:10px;z-index:1001;transition:all .3s ease;cursor:move;user-select:none;opacity:.9;transition:opacity .2s ease;}
.floating-toolbox:hover{opacity:1;}
.toolbox-main-btn{width:56px;height:56px;border-radius:50%;background-color:var(--toolbox-color,var(--secondary-color));color:#fff;border:none;cursor:pointer;box-shadow:0 4px 12px rgba(0,0,0,.2);display:flex;justify-content:center;align-items:center;transition:all .3s ease;z-index:1002;}
.toolbox-main-btn:hover,.toolbox-main-btn:focus{transform:scale(1.1);outline:none;}
.toolbox-main-btn i{font-size:24px;transition:transform .3s ease;}
.toolbox-main-btn.collapsed i{transform:rotate(0);}
.toolbox-main-btn.expanded i{transform:rotate(45deg);}
.toolbox-options{display:flex;flex-direction:column;gap:10px;transform:translateY(20px);opacity:0;visibility:hidden;transition:all .3s ease;pointer-events:none;}
.toolbox-options.visible{transform:translateY(0);opacity:1;visibility:visible;pointer-events:all;}
.toolbox-btn{padding:12px 18px;background-color:var(--toolbox-color,var(--secondary-color));color:#fff;border:none;border-radius:28px;cursor:pointer;box-shadow:0 2px 10px rgba(0,0,0,.2);display:flex;align-items:center;gap:8px;transition:all .3s ease;font-size:.9rem;width:max-content;max-width:200px;}
.toolbox-btn:hover,.toolbox-btn:focus{transform:translateY(-2px);outline:none;}
.toolbox-btn i{font-size:16px;}
.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.7);display:none;justify-content:center;align-items:center;z-index:1003;}
.modal-content{background-color:#fff;padding:25px;border-radius:8px;width:90%;max-width:500px;box-shadow:0 5px 20px rgba(0,0,0,.4);}
.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;}
.modal-title{font-size:1.5rem;color:var(--primary-color);margin:0;}
.modal-close{background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--error-color);padding:5px;}
.modal-body{margin-bottom:20px;}
.modal-footer{display:flex;justify-content:flex-end;gap:10px;}
.modal-btn{padding:10px 18px;border-radius:4px;cursor:pointer;border:none;font-size:.9rem;transition:all .2s ease;}
.modal-btn-primary{background-color:var(--secondary-color);color:#fff;}
.modal-btn-primary:hover,.modal-btn-primary:focus{background-color:#2980b9;outline:none;}
.modal-btn-secondary{background-color:#f0f0f0;color:#333;}
.modal-btn-secondary:hover,.modal-btn-secondary:focus{background-color:#e0e0e0;outline:none;}
.progress-container{width:100%;height:8px;background-color:rgba(255,255,255,.2);border-radius:4px;margin-top:20px;overflow:hidden;max-width:300px;}
.progress-bar{height:100%;background-color:#fff;width:0%;transition:width .4s ease;border-radius:4px;}
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0;}
.form-control{width:100%;padding:10px;margin:8px 0;border:1px solid #ddd;border-radius:4px;font-size:1rem;transition:border .3s ease;}
.form-control:focus{border-color:var(--secondary-color);outline:none;box-shadow:0 0 0 2px rgba(52,152,219,.2);}
.form-group{margin-bottom:15px;}
.form-group label{display:block;margin-bottom:5px;font-weight:500;}
@media (max-width:768px){.floating-toolbox{bottom:15px;right:15px;}.toolbox-main-btn{width:50px;height:50px;}.toolbox-btn{padding:10px 15px;font-size:.85rem;}}
@media (max-width:480px){.floating-toolbox{bottom:10px;right:10px;}.toolbox-main-btn{width:46px;height:46px;}.toolbox-main-btn i{font-size:20px;}.toolbox-btn{padding:8px 12px;font-size:.8rem;max-width:160px;}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
<div class="loading-container" id="loading" role="status" aria-live="polite">
<div class="spinner" aria-hidden="true"></div>
<div class="loading-text" id="loading-text">Cargando sistema de login...</div>
<div class="progress-container"><div class="progress-bar" id="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div></div>
<span class="sr-only">Cargando aplicación, por favor espere...</span>
</div>
<div class="error-message" id="error-message" role="alert">
<h2>Error al cargar el sistema de login</h2>
<p>Estamos experimentando problemas técnicos. Por favor, inténtelo de nuevo más tarde.</p>
<button onclick="reintentarCarga()" class="toolbox-btn">Reintentar</button>
</div>
<iframe id="login-frame" src="https://www.appcreator24.com/login_subcli.php" title="Sistema de Login" allow="autoplay; fullscreen" referrerpolicy="strict-origin-when-cross-origin" sandbox="allow-same-origin allow-scripts allow-forms allow-popups allow-modals" aria-label="Formulario de inicio de sesión" loading="eager"></iframe>
<div class="floating-toolbox" id="floatingToolbox">
<button class="toolbox-main-btn collapsed" id="toolboxMainBtn" aria-label="Mostrar herramientas" aria-expanded="false"><i class="fas fa-tools"></i></button>
<div class="toolbox-options" id="toolboxOptions">
<button class="toolbox-btn" id="autoFillBtn" title="Autocompletar credenciales" aria-label="Autocompletar credenciales"><i class="fas fa-key" aria-hidden="true"></i> Autocompletar</button>
<button class="toolbox-btn" id="externalNavBtn" title="Navegar a otra web" aria-label="Abrir navegación externa"><i class="fas fa-external-link-alt" aria-hidden="true"></i> Navegar</button>
<button class="toolbox-btn" id="colorChangeBtn" title="Cambiar color" aria-label="Cambiar color del toolbox"><i class="fas fa-palette" aria-hidden="true"></i> Color</button>
<button class="toolbox-btn" id="opacityBtn" title="Ajustar transparencia" aria-label="Ajustar transparencia del toolbox"><i class="fas fa-adjust" aria-hidden="true"></i> Transparencia</button>
</div>
</div>
<div class="modal-overlay" id="externalNavModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
<div class="modal-content">
<div class="modal-header">
<h3 class="modal-title" id="modalTitle">Navegación Externa</h3>
<button class="modal-close" id="modalClose" aria-label="Cerrar modal">&times;</button>
</div>
<div class="modal-body">
<p>Está a punto de salir del sistema de login. ¿Desea continuar?</p>
<div class="form-group">
<label for="externalUrl">URL de destino:</label>
<input type="url" id="externalUrl" class="form-control" placeholder="https://ejemplo.com" required pattern="https?://.+" title="La URL debe comenzar con http:// o https://">
<div id="urlSuggestions" class="suggestions-container" style="display:none;"></div>
</div>
</div>
<div class="modal-footer">
<button class="modal-btn modal-btn-secondary" id="cancelNav">Cancelar</button>
<button class="modal-btn modal-btn-primary" id="confirmNav">Aceptar</button>
</div>
</div>
</div>
<script>
const CONFIG={TIMEOUT_CARGA:10000,CREDENCIALES:{email:'afiliado@gmail.com',password:'1234'},URLS_PREFETCH:['/dashboard.css','/main.js','https://www.appcreator24.com/assets/login.css'],INTELIGENCIA:{intentosMaximos:3,delayEntreIntentos:2000,umbralRendimiento:3000,sugerenciasURL:['https://www.google.com','https://www.github.com','https://www.appcreator24.com/ayuda']},DOMINIOS_PERMITIDOS:['appcreator24.com','google.com','github.com'],COLORES_TOOLBOX:['#3498db','#e74c3c','#2ecc71','#f39c12','#9b59b6','#1abc9c']};
const APP_STATE={timeoutId:null,intentosAutocompletado:0,recursosCargados:0,recursosTotales:1,performanceMetrics:{startTime:null,loadTime:null,velocidadConexion:null,memoriaUsada:null},urlHistory:JSON.parse(localStorage.getItem('urlHistory'))||[],toolboxExpanded:false,toolboxColorIndex:0,toolboxDragging:false,toolboxOffset:{x:0,y:0},toolboxOpacity:0.9};
document.addEventListener('DOMContentLoaded',function(){iniciarCargaInteligente();configurarControles();detectarVelocidadConexion();iniciarMedicionMemoria();if('IntersectionObserver'in window){const observer=new IntersectionObserver(entries=>{entries.forEach(entry=>{if(entry.isIntersecting){cargarRecursosAdelantados();observer.disconnect();}});},{threshold:0.1});observer.observe(document.getElementById('login-frame'));}const iframe=document.getElementById('login-frame');iframe.addEventListener('load',iframeCargado);iframe.addEventListener('error',errorCarga);configurarToolbox();});
function iniciarCargaInteligente(){APP_STATE.performanceMetrics.startTime=performance.now();APP_STATE.timeoutId=setTimeout(()=>{if(document.getElementById('loading').style.display!=='none'){manejarErrorCarga();document.getElementById('loading-text').textContent="La carga está tardando más de lo esperado...";}},CONFIG.TIMEOUT_CARGA);simularProgresoCarga();if('performance'in window){performance.mark('login_start');}if('connection'in navigator&&navigator.connection.saveData){console.log("Modo de ahorro de datos detectado, optimizando carga...");}}
function simularProgresoCarga(){let progreso=0;const textosCarga=[{min:0,max:25,text:"Inicializando componentes de seguridad..."},{min:25,max:50,text:"Cargando recursos esenciales..."},{min:50,max:75,text:"Optimizando interfaz de usuario..."},{min:75,max:90,text:"Preparando sistema de autenticación..."},{min:90,max:100,text:"¡Casi listo!..."}];const intervalo=setInterval(()=>{progreso+=Math.random()*(10-(progreso/15));if(progreso>=95){clearInterval(intervalo);return;}const progressBar=document.getElementById('progress-bar');progressBar.style.width=`${progreso}%`;progressBar.setAttribute('aria-valuenow',Math.round(progreso));const textoActual=textosCarga.find(t=>progreso>=t.min&&progreso<t.max);if(textoActual){document.getElementById('loading-text').textContent=textoActual.text;}},300);}
function iframeCargado(){clearTimeout(APP_STATE.timeoutId);const loading=document.getElementById('loading');loading.style.opacity='0';setTimeout(()=>{loading.style.display='none';document.getElementById('login-frame').style.display='block';},500);document.getElementById('progress-bar').style.width='100%';document.getElementById('progress-bar').setAttribute('aria-valuenow',100);if('performance'in window){performance.mark('login_loaded');performance.measure('login_load_time','login_start','login_loaded');const measure=performance.getEntriesByName('login_load_time')[0];APP_STATE.performanceMetrics.loadTime=measure.duration;console.log('Métricas de carga:',{tiempoTotal:measure.duration+'ms',velocidadConexion:APP_STATE.performanceMetrics.velocidadConexion,memoriaUsada:APP_STATE.performanceMetrics.memoriaUsada});}window.addEventListener('message',manejarMensajes);if(APP_STATE.performanceMetrics.loadTime<CONFIG.INTELIGENCIA.umbralRendimiento){setTimeout(()=>{autoCompletarCredenciales();},500);}}
function manejarErrorCarga(){clearTimeout(APP_STATE.timeoutId);const loading=document.getElementById('loading');loading.style.opacity='0';setTimeout(()=>{loading.style.display='none';document.getElementById('error-message').style.display='block';},500);if('ga'in window){ga('send','event','Error','Login Load Failed',APP_STATE.performanceMetrics.velocidadConexion);}}
function reintentarCarga(){document.getElementById('error-message').style.display='none';const loading=document.getElementById('loading');loading.style.display='flex';setTimeout(()=>{loading.style.opacity='1';},10);document.getElementById('login-frame').src=`https://www.appcreator24.com/login_subcli.php?retry=${Date.now()}`;APP_STATE.timeoutId=setTimeout(()=>{if(document.getElementById('loading').style.display!=='none'){manejarErrorCarga();}},CONFIG.TIMEOUT_CARGA);}
function manejarMensajes(event){const allowedOrigins=['https://www.appcreator24.com','https://appcreator24.com'];if(!allowedOrigins.includes(event.origin))return;try{const data=JSON.parse(event.data);if(data.type==='login_success'){window.location.href=data.redirectUrl||'/dashboard';}if(data.type==='login_error'){console.error('Error de login:',data.message);if(data.message&&(data.message.includes('contraseña')||data.message.includes('credenciales'))){setTimeout(()=>{autoCompletarCredenciales();},1500);}}}catch(e){console.warn('Mensaje no reconocido o inválido:',event.data);}}
function autoCompletarCredenciales(){const iframe=document.getElementById('login-frame');if(APP_STATE.intentosAutocompletado>=CONFIG.INTELIGENCIA.intentosMaximos){console.warn('Máximo de intentos de autocompletado alcanzado');return;}APP_STATE.intentosAutocompletado++;try{const iframeDoc=iframe.contentDocument||iframe.contentWindow.document;const encontrarCampo=strategies=>{for(const strategy of strategies){const field=strategy(iframeDoc);if(field)return field;}return null;};const emailStrategies=[doc=>doc.querySelector('input[type="email"]'),doc=>doc.querySelector('input[type="text"][name*="mail"i]'),doc=>doc.querySelector('input[name="email"],input[name="username"],input[name="user"]'),doc=>doc.querySelector('input[placeholder*="mail"i],input[placeholder*="usuario"i]'),doc=>doc.querySelector('input#email,input#username,input#user')];const passwordStrategies=[doc=>doc.querySelector('input[type="password"]'),doc=>doc.querySelector('input[name="password"],input[name="pass"]'),doc=>doc.querySelector('input[placeholder*="contraseña"i],input[placeholder*="password"i]'),doc=>doc.querySelector('input#password,input#pass')];const emailField=encontrarCampo(emailStrategies);const passwordField=encontrarCampo(passwordStrategies);if(emailField&&passwordField){emailField.value=CONFIG.CREDENCIALES.email;passwordField.value=CONFIG.CREDENCIALES.password;const inputEvent=new Event('input',{bubbles:true});const changeEvent=new Event('change',{bubbles:true});emailField.dispatchEvent(inputEvent);emailField.dispatchEvent(changeEvent);passwordField.dispatchEvent(inputEvent);passwordField.dispatchEvent(changeEvent);const submitButton=iframeDoc.querySelector('button[type="submit"],input[type="submit"]');if(submitButton){submitButton.focus();}else{passwordField.focus();}APP_STATE.intentosAutocompletado=0;console.log('Credenciales autocompletadas con éxito');}else{console.warn('No se encontraron todos los campos necesarios');if(APP_STATE.intentosAutocompletado<CONFIG.INTELIGENCIA.intentosMaximos){setTimeout(()=>{autoCompletarCredenciales();},CONFIG.INTELIGENCIA.delayEntreIntentos);}}}catch(e){console.error('Error al autocompletar:',e);}}
function cargarRecursosAdelantados(){CONFIG.URLS_PREFETCH.forEach(url=>{const el=url.endsWith('.css')?document.createElement('link'):document.createElement('script');if(url.endsWith('.css')){el.rel='stylesheet';el.href=url;el.crossOrigin='anonymous';document.head.appendChild(el);}else{el.src=url;el.async=true;el.defer=true;document.body.appendChild(el);}});}
function detectarVelocidadConexion(){if('connection'in navigator){const connection=navigator.connection;if(connection.effectiveType){APP_STATE.performanceMetrics.velocidadConexion=connection.effectiveType;if(connection.effectiveType.includes('2g')||connection.saveData){console.log('Conexión lenta detectada, optimizando recursos...');CONFIG.URLS_PREFETCH=CONFIG.URLS_PREFETCH.filter(url=>url.includes('login.css'));}}if('addEventListener'in connection){connection.addEventListener('change',detectarVelocidadConexion);}}}
function iniciarMedicionMemoria(){if('memory'in performance){APP_STATE.performanceMetrics.memoriaUsada=performance.memory.usedJSHeapSize;}}
function configurarToolbox(){const toolbox=document.getElementById('floatingToolbox');const toolboxBtn=document.getElementById('toolboxMainBtn');const toolboxOptions=document.getElementById('toolboxOptions');const colorChangeBtn=document.getElementById('colorChangeBtn');const opacityBtn=document.getElementById('opacityBtn');toolboxBtn.addEventListener('click',function(e){e.stopPropagation();APP_STATE.toolboxExpanded=!APP_STATE.toolboxExpanded;if(APP_STATE.toolboxExpanded){toolboxBtn.classList.remove('collapsed');toolboxBtn.classList.add('expanded');toolboxOptions.classList.add('visible');toolboxBtn.setAttribute('aria-expanded','true');}else{toolboxBtn.classList.remove('expanded');toolboxBtn.classList.add('collapsed');toolboxOptions.classList.remove('visible');toolboxBtn.setAttribute('aria-expanded','false');}});colorChangeBtn.addEventListener('click',function(){APP_STATE.toolboxColorIndex=(APP_STATE.toolboxColorIndex+1)%CONFIG.COLORES_TOOLBOX.length;const newColor=CONFIG.COLORES_TOOLBOX[APP_STATE.toolboxColorIndex];toolbox.style.setProperty('--toolbox-color',newColor);});opacityBtn.addEventListener('click',function(){APP_STATE.toolboxOpacity=APP_STATE.toolboxOpacity===0.9?0.6:APP_STATE.toolboxOpacity===0.6?0.3:0.9;toolbox.style.opacity=APP_STATE.toolboxOpacity;});toolbox.addEventListener('mousedown',function(e){if(e.target===toolbox||e.target===toolboxBtn){APP_STATE.toolboxDragging=true;APP_STATE.toolboxOffset.x=e.clientX-toolbox.getBoundingClientRect().left;APP_STATE.toolboxOffset.y=e.clientY-toolbox.getBoundingClientRect().top;toolbox.style.cursor='grabbing';}});document.addEventListener('mousemove',function(e){if(APP_STATE.toolboxDragging){const x=e.clientX-APP_STATE.toolboxOffset.x;const y=e.clientY-APP_STATE.toolboxOffset.y;toolbox.style.left=`${x}px`;toolbox.style.top=`${y}px`;toolbox.style.right='auto';toolbox.style.bottom='auto';}});document.addEventListener('mouseup',function(){APP_STATE.toolboxDragging=false;toolbox.style.cursor='move';});document.addEventListener('click',function(e){if(!e.target.closest('.floating-toolbox')&&APP_STATE.toolboxExpanded){toolboxBtn.classList.remove('expanded');toolboxBtn.classList.add('collapsed');toolboxOptions.classList.remove('visible');toolboxBtn.setAttribute('aria-expanded','false');APP_STATE.toolboxExpanded=false;}});toolbox.addEventListener('dblclick',function(){toolbox.style.left='auto';toolbox.style.top='auto';toolbox.style.right='20px';toolbox.style.bottom='20px';});}
function configurarControles(){const modal=document.getElementById('externalNavModal');const openModalBtn=document.getElementById('externalNavBtn');const closeModalBtn=document.getElementById('modalClose');const cancelBtn=document.getElementById('cancelNav');const confirmBtn=document.getElementById('confirmNav');const urlInput=document.getElementById('externalUrl');const suggestionsContainer=document.getElementById('urlSuggestions');openModalBtn.addEventListener('click',()=>{modal.style.display='flex';document.getElementById('externalUrl').focus();});const closeModal=()=>{modal.style.display='none';urlInput.value='';suggestionsContainer.style.display='none';};closeModalBtn.addEventListener('click',closeModal);cancelBtn.addEventListener('click',closeModal);confirmBtn.addEventListener('click',()=>{let url=urlInput.value.trim();if(!url){urlInput.setCustomValidity('Por favor ingrese una URL válida');urlInput.reportValidity();return;}if(!url.startsWith('http://')&&!url.startsWith('https://')){url='https://'+url;}try{new URL(url);const domain=new URL(url).hostname;const isAllowed=CONFIG.DOMINIOS_PERMITIDOS.some(allowed=>domain===allowed||domain.endsWith('.'+allowed));if(!isAllowed){if(!confirm(`Está a punto de navegar a ${domain} que no está en la lista de dominios permitidos. ¿Continuar?`)){return;}}APP_STATE.urlHistory.unshift(url);if(APP_STATE.urlHistory.length>5){APP_STATE.urlHistory.pop();}localStorage.setItem('urlHistory',JSON.stringify(APP_STATE.urlHistory));window.open(url,'_blank','noopener,noreferrer');closeModal();}catch(e){urlInput.setCustomValidity('Ingrese una URL válida (ej: https://ejemplo.com)');urlInput.reportValidity();}});urlInput.addEventListener('input',(e)=>{const input=e.target.value.toLowerCase();if(!input){suggestionsContainer.style.display='none';return;}const allSuggestions=[...new Set([...CONFIG.INTELIGENCIA.sugerenciasURL,...APP_STATE.urlHistory])];const filtered=allSuggestions.filter(url=>url.toLowerCase().includes(input));if(filtered.length>0){suggestionsContainer.innerHTML=filtered.map(url=>`<div class="suggestion-item" data-url="${url}">${url}</div>`).join('');suggestionsContainer.style.display='block';document.querySelectorAll('.suggestion-item').forEach(item=>{item.addEventListener('click',()=>{urlInput.value=item.getAttribute('data-url');suggestionsContainer.style.display='none';});});}else{suggestionsContainer.style.display='none';}});modal.addEventListener('click',(e)=>{if(e.target===modal){closeModal();}});document.addEventListener('keydown',(e)=>{if(e.key==='Escape'&&modal.style.display==='flex'){closeModal();}});urlInput.addEventListener('keyup',(e)=>{if(e.key==='Enter'){confirmBtn.click();}});}
function errorCarga(){manejarErrorCarga();}
</script>
</body>
</html>